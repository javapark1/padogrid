  ${SERVER_NAME}:
    env_file: .env
    environment:
      - JAVA_OPTS="-Dhazelcast.instance.name=`hostname`\ -Dhazelcast.config=/padogrid/etc/hazelcast.xml\ -Dpadogrid.cluster-name=$CLUSTER_NAME\ -Dpadogrid.group=$CLUSTER_GROUP\ -Dpadogrid.tcp.port=$SERVER_PORT\ -Dpadogrid.tcp.members=$TCP_MEMBERS\ -Dhazelcast.logging.type=log4j2\ -Dlog4j.configurationFile=/padogrid/etc/log4j2.properties\ -Dhazelcast.shutdownhook.enabled=true\ -Dhazelcast.shutdownhook.policy=GRACEFUL\ -Dcom.sun.management.jmxremote.port=$JMX_PORT\ -Dcom.sun.management.jmxremote.ssl=false\ -Dcom.sun.management.jmxremote.authenticate=false\ -Dhazelcast.jmx=true\ -Dhazelcast.client.config=/padogrid/etc/hazelcast-client.xml\ -Dhazelcast.jet.config=/padogrid/etc/hazelcast-jet.xml\ -Dhazelcast.health.monitoring.level=NOISY\ -Dhazelcast.health.monitoring.delay.seconds=10\ -Dhazelcast.health.monitoring.threshold.memory.percentage=70\ -Dhazelcast.health.monitoring.threshold.cpu.percentage=70\ -Dhazelcast.diagnostics.enabled=true\ -Dhazelcast.diagnostics.metric.distributed.datastructures=true\ -Dhazelcast.diagnostics.metric.level=info\ -Dhazelcast.diagnostics.invocation.sample.period.seconds=30\ -Dhazelcast.diagnostics.pending.invocations.period.seconds=30\ -Dhazelcast.diagnostics.slowoperations.period.seconds=30\ -Dhazelcast.diagnostics.storeLatency.period.seconds=60\ -Dhazelcast.diagnostics.filename.prefix=$CLUSTER_NAME\ -Dhazelcast.diagnostics.directory=/padogrid/log\ -Dhazelcast.local.publicAddress=$HOSTNAME_FOR_CLIENTS:${HOST_SERVER_PORT}\ -Xms1g\ -Xmx1g\ -Xdebug\ -agentlib:jdwp=transport=dt_socket,server=y,suspend=n,address=9101"
      - LOG_FILE=/padogrid/log/${CLUSTER_NAME}-${SERVER_NAME}.log
    image: hazelcast/${IMAGE_NAME}:${VERSION}
    hostname: ${SERVER_NAME}
    mem_limit: 1g
    expose:
     - "$SERVER_PORT"
     - "$JMX_PORT"
     - "$DEBUG_PORT"
    ports:
     - "${HOST_SERVER_PORT}:5701"
     - "${HOST_JMX_PORT}:1099"
     - "${HOST_DEBUG_PORT}:9101"
    volumes:
     - ./padogrid:/padogrid/
    restart: on-failure
